{"version":3,"sources":["component.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"component.js","sourcesContent":["$(document).ready(function() {\r\n    var error = $('.data').attr('data-error');\r\n    var notice = $('.data').attr('data-confirm');\r\n    var link = $('.data').attr('data-link');\r\n    var email_confirm = $('.data').attr('data-email-invalid');\r\n\r\n\r\n    function validateEmail(email) {\r\n        var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(email);\r\n    }\r\n\r\n    $(document).on('click', '.send-mail', function() {\r\n        var idSurvey = $(this).attr('data-id-survey');\r\n        $('.bt-send').attr('data-id', idSurvey);\r\n        $('.tiles, .render, #menu').fadeOut();\r\n        $('.popupBackground').fadeIn();\r\n    });\r\n\r\n    $(document).on('click', '.close', function() {\r\n        $('.tiles, .render, #menu').fadeIn();\r\n        $('.popupBackground').fadeOut();\r\n    });\r\n\r\n    $(document).on('click', '.remove-survey', function() {\r\n        var result = confirm(notice);\r\n\r\n        if (result) {\r\n            var key = $(this).attr('data-key');\r\n            var url = $(this).attr('url');\r\n            var idSurvey = $(this).attr('id-survey');\r\n            $.post(\r\n                url,\r\n                {\r\n                    'idSurvey': idSurvey,\r\n                },\r\n                function(response) {\r\n\r\n                    if (response.success) {\r\n                        $('.style' + key).remove();\r\n                    } else {\r\n                        alert(error);\r\n                    }\r\n            });\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.bt-send', function() {\r\n        var url = $(this).attr('data-url');\r\n        var redirect = $(this).attr('data-redirect');\r\n        var emails = $('.form-emails').tagsinput('items');\r\n        var idSurvey =$(this).attr('data-id');\r\n        var flag = true;\r\n\r\n        emails.forEach(function (email) {\r\n\r\n            if (!validateEmail(email)) {\r\n                flag = false;\r\n            }\r\n        });\r\n\r\n        if (flag) {\r\n            $.post(\r\n                url,\r\n                {\r\n                    'emails' : emails,\r\n                    'surveyId' : idSurvey,\r\n                },\r\n                function(response) {\r\n\r\n                    if (response.success) {\r\n                        window.location.href = redirect;\r\n                    }else{\r\n                        alert(error);\r\n                    }\r\n            });\r\n        } else {\r\n            alert(email_confirm);\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.mark-survey', function() {\r\n        var url = $(this).attr('data-url');\r\n        var idSurvey = $(this).siblings('.send-mail').attr('data-id-survey');\r\n        var value = $(this).children('.bt-like').attr('data-value');\r\n\r\n        if (value == 1) {\r\n            var classA = 'glyphicon-star-empty';\r\n            var classB = 'glyphicon-star';\r\n            var data = 0;\r\n        } else {\r\n            var classA = 'glyphicon-star';\r\n            var classB = 'glyphicon-star-empty';\r\n            var data = 1;\r\n        }\r\n\r\n        $(this).children('.bt-like').removeClass(classA).addClass(classB).attr('data-value', data);\r\n        $.post(\r\n            url,\r\n            {\r\n                'idSurvey': idSurvey,\r\n                'value': value,\r\n            },\r\n            function(response) {\r\n\r\n                if (response.success) {\r\n\r\n                } else {\r\n                    alert(error);\r\n                }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '.view-result', function() {\r\n        window.location.href = $(this).attr('data-url');\r\n    });\r\n\r\n    $('input.typeahead').typeahead({\r\n        source:  function (query, process) {\r\n\r\n        return $.get(\r\n            link,\r\n            {\r\n                \"query\": query\r\n            }, function (data) {\r\n\r\n                return process(data);\r\n            });\r\n        }\r\n    });\r\n\r\n    $('.alert-message').delay(3000).slideUp(300);\r\n});\r\n"]}